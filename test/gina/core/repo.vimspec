Describe gina#core#repo
  Before all
    let Path = vital#gina#import('System.Filepath')
    let slit1 = Slit(tempname(), 1)
    call slit1.write('A/foo.txt', [])
    call slit1.write('B/foo.txt', [])
    call slit1.write('C/foo.txt', [])
    call slit1.execute('add %s', slit1.path('A/foo.txt'))
    call slit1.execute('commit --quiet -m "First"')
    call slit1.execute('checkout -b develop')
    call slit1.execute('add %s', slit1.path('B/foo.txt'))
    call slit1.execute('commit --quiet -m "Second"')
    call slit1.execute('checkout master')
    call slit1.execute('add %s', slit1.path('C/foo.txt'))
    call slit1.execute('commit --quiet -m "Thrid"')
  End

  Before
    bufdo! bwipeout!
  End

  Describe #config({git})
    It returns a config dictionary of {git} repository
      execute 'edit' fnameescape(slit1.worktree)

      let git = gina#core#get()
      let config = gina#core#repo#config(git)
      Assert KeyExists(config, 'branch')
      Assert KeyExists(config.branch, 'develop')
    End
  End
End
