Describe gina#command#lcd
  Before all
    let Path = vital#gina#import('System.Filepath')
    let slit1 = Slit(tempname(), 1)
    call slit1.write('A/foo/bar.txt', [])
    let cwd = getcwd()
  End

  Before
    silent! windo bwipeout!
    edit foo
    execute 'new' fnameescape(Path.join(slit1.worktree, 'A', 'foo.txt'))
  End

  After
    execute 'cd' fnameescape(cwd)
  End

  Describe Use cases
    It might be called without arguments
      GinaSync lcd
      Assert Equals(getcwd(), slit1.worktree)
      silent wincmd p
      Assert Equals(getcwd(), cwd)
    End

    It might be called with 'A/foo'
      GinaSync lcd A/foo
      Assert Equals(
            \ getcwd(),
            \ Path.join(slit1.worktree, 'A', 'foo')
            \)
      silent wincmd p
      Assert Equals(getcwd(), cwd)
    End
  End
End
