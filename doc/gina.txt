*gina.txt*				Control a git repository from Vim

Version: 0.1.0-dev
Author:  Alisue <lambdalisue@hashnote.net>
Support: Vim 8.0.0134 and above
Support: Neovim 0.1.7 and above
License: MIT license

=============================================================================
CONTENTS					*gina-contents*

Introduction			|gina-introduction|
Usage				|gina-usage|
Interface			|gina-interface|
  Commands			|gina-commands|
  Variables			|gina-variables|
  Mappings			|gina-mappings|
  Functions			|gina-functions|
  Options			|gina-options|
  Actions			|gina-actions|


=============================================================================
INTRODUCTION					*gina-introduction*

*gina* is a git manipulation plugin which uses job feature of Neovim and Vim
to support async process call.


=============================================================================
USAGE						*gina-usage*


=============================================================================
INTERFACE					*gina-interface*

-----------------------------------------------------------------------------
COMMANDS					*gina-commands*

						*:Gina*
:Gina[!] {command} [{options}]
	Call {command} with {options}.
	It call a gina command of {command} when {command} is found under
	the namespace "gina#command#".
	Otherwise it call a raw {command} ("git {command} {options}") and
	echo the result. It immediately call a raw {command} rather than a
	gina command even if there are {command} is found if a bang (!) has
	specified.

						*:Gina-branch*
:Gina branch [{options}]
	Open a "gina-branch" buffer to list and manipulate branches.
	The followings are allowed in {options}

	--opener={opener}
		An opener command for the new buffer (|gina-options-opener|)

	The following action groups are available in the buffer.

	|gina-action-branch|
	|gina-action-browse|
	|gina-action-changes|
	|gina-action-commit|
	|gina-action-show|

	See "man git-branch" for other available {options}.

						*:Gina-browse*
:Gina browse [{options}] [{commit}] [-- {path}]
	Show a remote content of {path} or the repository in a connected
	remote in a system browser (e.g. Firefox, Google Chrome, etc).
	If no {path} is specified, the path of the current buffer is used.
	If no {commit} has specified, the HEAD is used.
	The followings are allowed in {options}

	--selection={selection}
		An initial selection (|gina-options-selection|)
	--scheme={scheme}
		Use a specified scheme to build a remote url.
	--exact
		Use an exact revision instead of a branch name
	--yank
		Yank a url instead of opening
	
	See
	|g:gina#command#browse#translation_patterns|
	|g:gina#command#browse#extra_translation_patterns|
	to find allowed {scheme} or available remote urls.

						*:Gina-cd*
:Gina cd [-- {path}]
	Change a current directory to the {path} or the repository root.
	See also |:Gina-lcd|.

						*:Gina-changes*
:Gina changes [{options}] [{commit}]
	Open a "gina-changes" buffer to show changed files of {commit}.
	The followings are allowed in {options}

	--opener={opener}
		An opener command for the new buffer (|gina-options-opener|)

	It use "git diff --numstat" internally so see "man git-diff" for
	other available {options}.

	The following action groups are available in the buffer.
	
	|gina-action-browse|
	|gina-action-compare|
	|gina-action-diff|
	|gina-action-edit|
	|gina-action-show|

						*:Gina-chaperon*
:Gina chaperon [{options}]
	Open three buffers to solve conflicted changes during merge.
	NOTE: Not impelmented yet.

						*:Gina-commit*
:Gina commit [{options}]
	Open a "gina-commit" buffer to commit changes.
	The changes will be commited when the buffer has closed.

	The following buffer mapping is available

	<Plug>(gina-commit-toggle)
		Toggle "--amend" option. It is mapped to <C-^> in default.

						*:Gina-compare*
:Gina compare [{options}] [{commit}] [-- {path}]
	Open two buffers to compare the content of {path} between 1) working
	tree vs index or {commit}, 2) index vs HEAD or {commit}.
	If no {path} has specified, the path of the current buffer is used.
	If no {commit} has specified, the index or HEAD is used depends on
	the --cached option.
	The followings are allowed in {options}

	--opener={opener}
		An opener command for the 1st buffer (|gina-options-opener|)
	--selection={selection}
		An initial selection (|gina-options-selection|)
	--cached
		Compare to the index rather than the working tree
	-R
		Reverse the buffer order.

	It respects 'diffopt' when opening the 2nd buffer. Add "vertical" to
	the option if you prefer to open the 2nd buffer vertically.

						*:Gina-diff*
:Gina diff [{options}] [{commit}] [-- {path}]
	Show an unified diff of {path} or the repository between 1) working
	tree vs index or {commit}, 2) index vs HEAD or {commit}.
	If no {path} has specified, the path of the current buffer is used.
	If no {commit} has specified, the index or HEAD is used depends on
	the --cached option.
	The followings are allowed in {options}

	--opener={opener}
		An opener command for the new buffer (|gina-options-opener|)
	--repository
		Show a repository instead of the content of a specific file

	See "man git-diff" for other available {options}.

						*:Gina-edit*
:Gina edit [{options}] [-- {path}]
	Open a content of the {path} in the working tree.
	If no {path} has specified, the path of the current buffer is used.
	The followings are allowed in {options}

	--opener={opener}
		An opener command for the new buffer (|gina-options-opener|)
	--selection={selection}
		An initial selection (|gina-options-selection|)

	See "man git-diff" for other available {options}.

						*:Gina-grep*
:Gina grep [{options}]
	Open a "gina-grep" buffer to show files which match with the
	specified patterns.
	The followings are allowed in {options}

	--opener={opener}
		An opener command for the new buffer (|gina-options-opener|)

	The following action groups are available in the buffer.

	|gina-action-browse|
	|gina-action-compare|
	|gina-action-diff|
	|gina-action-edit|
	|gina-action-export|
	|gina-action-patch|
	|gina-action-show|

	See "man git-grep" for other available {options}.

						*:Gina-lcd*
:Gina lcd [-- {path}]
	Change a current directory to the {path} or the repository root.
	See also |:Gina-cd|.

						*:Gina-log*
:Gina log [{options}] [-- {path}]
	Open a "gina-log" buffer to show commits of the {paht} or the
	repository.
	The followings are allowed in {options}

	--opener={opener}
		An opener command for the new buffer (|gina-options-opener|)

	The following action groups are available in the buffer.

	|gina-action-browse|
	|gina-action-changes|
	|gina-action-commit|
	|gina-action-compare|
	|gina-action-diff|
	|gina-action-edit|
	|gina-action-show|

	See "man git-log" for other available {options}.

						*:Gina-ls-files*
:Gina ls-files [{options}]
	List files in the working tree.
	The followings are allowed in {options}

	--opener={opener}
		An opener command for the new buffer (|gina-options-opener|)

	The following action groups are available in the buffer.

	|gina-action-browse|
	|gina-action-compare|
	|gina-action-diff|
	|gina-action-edit|
	|gina-action-show|

	See "man git-ls-files" for other available {options}.

						*:Gina-ls-tree*
:Gina ls-tree [{options}] [{commit}]
	List files in the index or the commit.
	The followings are allowed in {options}

	--opener={opener}
		An opener command for the new buffer (|gina-options-opener|)

	The following action groups are available in the buffer.

	|gina-action-browse|
	|gina-action-compare|
	|gina-action-diff|
	|gina-action-edit|
	|gina-action-show|

	See "man git-ls-tree" for other available {options}.

						*:Gina-patch*
:Gina patch [{options}] [-- {path}]
	Open three buffers to patch changes of {path} to the index.
	If no {path} has specified, the path of the current buffer is used.
	The followings are allowed in {options}

	--opener={opener}
		An opener command for the 1st buffer (|gina-options-opener|)
	--selection={selection}
		An initial selection (|gina-options-selection|)

	It respects 'diffopt' when opening the 2nd, 3rd buffer. Add "vertical"
	to the option if you prefer to open the 2nd, 3rd buffer vertically.

						*:Gina-reflog*
:Gina reflog [{options}]
	Open a "gina-reflog" buffer to see reflog of the repository.
	The followings are allowed in {options}

	--opener={opener}
		An opener command for the new buffer (|gina-options-opener|)

	The following action groups are available in the buffer.

	|gina-action-changes|
	|gina-action-commit|
	|gina-action-show|

	See "man git-reflog" for other available {options}.

						*:Gina-show*
:Gina show [{options}] [{commit}] [-- {path}]
	Show a content of {path} or the repository.
	If no {path} has specified, the path of the current buffer is used.
	If no {commit} has specified, the index is used.
	The followings are allowed in {options}

	--opener={opener}
		An opener command for the new buffer (|gina-options-opener|)
	--selection={selection}
		An initial selection (|gina-options-selection|)
	--repository
		Show a repository instead of the content of a specific file

	See "man git-show" for other available {options}.

						*:Gina-status*
:Gina status [{options}]
	Open a "gina-status" buffer to show status of the repository.
	The followings are allowed in {options}

	--opener={opener}
		An opener command for the new buffer (|gina-options-opener|)

	The following action groups are available in the buffer.

	|gina-action-browse|
	|gina-action-compare|
	|gina-action-diff|
	|gina-action-edit|
	|gina-action-export|
	|gina-action-index|
	|gina-action-patch|
	|gina-action-show|

	See "man git-status" for other available {options}.

-----------------------------------------------------------------------------
VARIABLES					*gina-variables*

		*g:gina#command#browse#extra_translation_patterns*
g:gina#command#browse#extra_translation_patterns
	Add extra translation pattern for |:Gina-browse|.
	

-----------------------------------------------------------------------------
MAPPINGS					*gina-mappings*

The followings are builtin default mappings.

Mode	Key	Action~
n	?	builtin:help
nvi	<Tab>	builtin:choice
nvi	.	builtin:repeat

Users can find <Plug> mappings of individual actions in a message shown by
"builtin:help" action (hit ? in an action enabled buffer).
Then use |map| command in a corresponding |ftplugin| to define a custom mapping
like:
>
	" e.g. ~/.vim/ftplugin/gina-status.vim
	nmap <buffer> <Leader>t <Plug>(gina-edit-tabedit)
	nmap <buffer> <Leader>p <Plug>(gina-edit-preview)
<
-----------------------------------------------------------------------------
FUNCTIONS					*gina-functions*

						*gina#action#alias()*
gina#action#alias({alias}, {name})
	Add an {alias} of {name} action. Users can access the action with the
	{alias} in "builtin:choice" action.

-----------------------------------------------------------------------------
OPTIONS						*gina-options*

						*gina-options-opener*
--opener={opener}
	Specify an opener command for a new buffer. For example
>
	:Gina show --opener=vsplit
	:Gina show --opener="botright split"
<
	See |opening-window| for available values.

						*gina-options-selection*
--selection={selection}
	Specify an initial selection of the buffer. For example
>
	:Gina show --selection=10
	:Gina show --selection=10:5
	:Gina show --selection=10-20
	:Gina show --selection=10:5-20:10
<
	The format of the {selection} is "{line1}:{col1}-{line2}:{col2}".

-----------------------------------------------------------------------------
ACTIONS						*gina-actions*

					*gina-action-builtin*
builtin:echo
	Echo the selected candidates.
	Note that this is a hidden action.
builtin:help
builtin:help:all
	Show available actions in the buffer.
	When ":all" has specified, all available actions including hidden
	actions are shown.
	The action is mapped to "?" in normal mode.
	Note that this is not a repeatalbe action.
builtin:choice
	Select an action to perform.
	The action is mapped to "<Tab>" in normal, visual, and insert mode.
	Note that this is not a repeatalbe action.
builtin:repeat
	Repeat a previous repeatable action.
	The action is mapped to "." in normal, visual, and insert mode.
	Note that this is not a repeatalbe action.

					*gina-action-branch*
branch:checkout
	Checkout a branch. It create a new local branch when a remote branch
	has specified.
branch:delete
branch:delete:force
	Delete a branch.
branch:move
branch:move:force
	Rename a branch.
branch:new
	Create a new branch
branch:set-upstream-to
	Set upstream of the branch
branch:unset-upstream
	Unset upstream of the branch

					*gina-action-browse*
browse
	Open a system browser of the url of remote of the content.
browse:exact
	Open a system browser of the url of remote of the content.
	A hashref is used to construct the url rather than branch.
browse:yank
	Yank the url of remote of the content.
browse:exact:yank
	Yank the url of remote of the content.
	A hashref is used to construct the url rather than branch.

					*gina-action-changes*
changes:of
	Show changes of the commit.
changes:between
	Show changes between the commit and HEAD.
changes:from
	Show changes from a common ancestor of the commit and HEAD.

					*gina-action-commit*
commit:merge
commit:merge:ff-only
commit:merge:no-ff
commit:merge:squash
	Merge the commit into HEAD
commit:rebase
	Rebase HEAD from the commit
commit:rebase:merge
	Rebase HEAD by merging the commit
commit:revert
commit:revert:1
commit:revert:2
	Revert the commit (-m1/-m2)
commit:cherry-pick
commit:cherry-pick:1
commit:cherry-pick:2
	Cherry pick the commit (-m1/-m2)

					*gina-action-compare*
compare
compare:above
compare:below
compare:left
compare:right
compare:tab
	Open two buffer to compare

					*gina-action-diff*
diff
diff:above
diff:below
diff:left
diff:right
diff:tab
diff:preview
	Open a diff content.

					*gina-action-edit*
edit
edit:above
edit:below
edit:left
edit:right
edit:tab
edit:preview
	Edit a content in the working tree.

					*gina-action-export*
export:quickfix
	Replace quickfix list with the selected candidates.
export:quickfix:add
	Add selected candidates to the quickfix list.

					*gina-action-index*
index:add
index:add:force
index:add:intent-to-add
	Add changes to the index.
	Note that this is a hidden action.
index:rm
index:rm:force
index:rm:cached
	Remove the content from the index and working tree.
	Note that this is a hidden action.
index:reset
	Remove changes from the index
	Note that this is a hidden action.
index:stage
index:stage:force
	Stage changes to the index.
	It uses "index:add" and "index:rm" internally.
index:unstage
	Unstage changes to the index.
	It is an alias of "index:reset".
index:toggle
	Toggle stage/unstage of changes.
	It uses "index:stage" and "index:unstage" internally.
index:checkout
index:checkout:force
	Checkout the content.
index:checkout:ours
	Checkout our content during merge.
index:checkout:theirs
	Checkout their content during merge.
index:checkout:HEAD
index:checkout:HEAD:force
	Checkout the content in HEAD
index:checkout:origin/HEAD
index:checkout:origin/HEAD:force
	Checkout the content in origin/HEAD
index:discard
index:discard:force
	Discard the changes in working tree.
	If the file is tracked, the content is overwritten via the content in
	HEAD. If the file is untracked, the file is removed ()

					*gina-action-patch*
patch
patch:above
patch:below
patch:left
patch:right
patch:tab
	Open three buffers to patch changes to the index.
	Not implemented yet.

					*gina-action-show*
show
show:above
show:below
show:left
show:right
show:tab
show:preview
	Show a content in the index or the commit.

=============================================================================
vim:tw=78:fo=tcq2mM:ts=8:ft=help:norl
